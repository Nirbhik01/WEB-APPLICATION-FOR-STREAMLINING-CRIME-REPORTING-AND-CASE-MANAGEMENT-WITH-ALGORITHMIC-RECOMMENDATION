{% extends 'BaseTemplate.html' %}
{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    {% tailwind_css %}
</head>

<body class="transform duration-500">
    {%block main_content%}
    <div id="main_content" class="mt-10 px-5 md:px-5 md:mt-14">
        {%if True%}
        <div class="px-5 md:px-0 md:mx-7 md:border-t ">
            <ol
                class="relative border-s border-gray-200 -mt-4 dark:border-gray-700 md:text-center dark: md:flex md:border-s-0 md:justify-between ">
                <li class="flex items-center bg-white -ml-3  mb-10 md:mb-0 md:ml-0 md:block ">
                    <span
                        class=" bg-cool-gray flex items-center justify-center w-6 h-6 md:w-8 md:h-8 bg-green-200 rounded-full -start-3 ring-4 ring-white dark:ring-gray-900 dark:bg-green-900 md:mx-auto">
                    </span>
                    <div class="mx-3 md:mx-0">
                        <h3 class="font-medium leading-tight text-wrap md:mt-2">FIR<span
                                class="hidden md:inline"><br></span> Registration</h3>
                    </div>
                </li>
                <li class="flex items-center bg-white mb-10 -ml-3  md:mb-0 md:ml-0 md:block">
                    <span
                        class="bg-cool-gray flex items-center justify-center w-6 h-6 md:w-8 md:h-8  bg-gray-100 rounded-full -start-3 ring-4 ring-white dark:ring-gray-900 dark:bg-gray-700 md:mx-auto">
                    </span>
                    <div class="mx-3 md:mx-0">
                        <h3 class="font-medium leading-tight text-wrap md:mt-2">FIR<span
                                class="hidden md:inline"><br></span> Verification</h3>
                    </div>
                </li>

                <!-- Add from the middle not from top or bottom -->

                <li class="flex items-center bg-white mb-10 -ml-3 md:mb-0 md:ml-0 md:block">
                    <span
                        class="  bg-cool-gray flex items-center justify-center w-6 h-6 md:w-8 md:h-8  bg-gray-100 rounded-full -start-3 ring-4 ring-white dark:ring-gray-900 dark:bg-gray-700 md:mx-auto">
                    </span>
                    <div class="mx-3 md:mx-0">
                        <h3 class="font-medium leading-tight text-wrap md:mt-2">Investigator<span
                                class="hidden md:inline"><br></span> Assigning</h3>
                    </div>
                </li>
                <li class=" group flex items-center bg-white mb-10 -ml-3 md:mb-0 md:ml-0 md:block ">

                    <span
                        class="relative  inline-flex items-center justify-center bg-cool-gray bg-gray-100 rounded-full start-3  ring-white  md:start-0 md:mx-auto ">
                        <!-- <span class="animate-scale  z-0 md:h-8 md:w-8 w-6 h-6 rounded-full "></span>  -->
                        <span
                            class="animate-scale animation-delay-500 absolute z-10 md:h-8 md:w-8 w-6 h-6 rounded-full bg-cool-gray ring-4 ring-white"></span>
                    </span>
                    <!-- <span
                                class="   bg-cool-gray flex items-center justify-center w-6 h-6 md:w-8 md:h-8  bg-gray-100 rounded-full -start-3 ring-4 ring-white dark:ring-gray-900 dark:bg-gray-700 md:mx-auto">
                            </span> -->
                    <div class="mx-9 md:mx-0 ">
                        <h3 class=" font-medium leading-tight text-wrap md:mt-4 ">
                            Investigation<span class="hidden md:inline"><br></span> Ongoing</h3>
                    </div>

                </li>
                <li class="items-center flex -ml-3 md:ml-0 bg-white md:block">
                    <span
                        class="  bg-cool-gray flex items-center justify-center w-6 h-6 md:w-8 md:h-8  bg-gray-100 rounded-full -start-3 ring-4 ring-white dark:ring-gray-900 dark:bg-gray-700 md:mx-auto">
                    </span>
                    <div class="mx-3 md:mx-0">
                        <h3 class="font-medium leading-tight text-wrap md:mt-2">Investigation<span
                                class="hidden md:inline"><br></span> Termination</h3>
                    </div>
                </li>
            </ol>
        </div>
        {%endif%}
        <div id="activity_log"
            class=" mx-0 md:mx-5 my-10 bg-light-gray p-5 rounded-xl max-h-screen overflow-y-scroll [&::-webkit-scrollbar]:hidden transform duration-500">
            <div id="log">
                <div class="flex justify-between transform duration-500">
                    <h1 class="text-2xl font-medium">Activity Log</h1>

                    <!-- true if the user is police -->

                    {%if True%}
                    <button data-modal-target="crud-modal" data-modal-toggle="crud-modal"
                        class="block text-white focus:ring-0 focus:outline-none font-medium rounded-lg text-sm text-center hover:scale-[1.2] transform duration-500"
                        type="button">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                            stroke="currentColor" class="size-6 text-cool-gray transform duration-500">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                        </svg>
                    </button>
                    {%endif%}
                </div>
                <ul role="list" class="divide-y mt-3 divide-gray-100 transform duration-500">
                    <li class="flex justify-between gap-x-6 py-5">
                        <div class="flex min-w-0 gap-x-4">
                            <div class="min-w-0 flex-auto">
                                <p class="text-base font-semibold ">Suspect Investigation</p>
                                <p class="mt-1 text-sm ">Your suspect "hari godar" was investigated about the issue</p>
                            </div>
                        </div>
                        <div class=" shrink-0 sm:flex sm:flex-col sm:items-end">
                            <p class=" text-xs/5 ">Updated <time datetime="2023-01-23T13:23Z">13h
                                    ago</time></p>
                        </div>
                    </li>

                    <!-- Add Items Here -->

                    <li class="flex justify-between gap-x-6 py-5">
                        <div class="flex min-w-0 gap-x-4">
                            <div class="min-w-0 flex-auto">
                                <p class="text-base font-semibold ">Evidence Collection</p>
                                <p class="mt-1  text-sm ">An artifact regarding </p>
                            </div>
                        </div>
                        <div class=" shrink-0 sm:flex sm:flex-col sm:items-end">
                            <p class=" text-xs/5 ">Updated <time datetime="2023-01-23T13:23Z">3h
                                    ago</time></p>
                        </div>
                    </li>
                    <li class="flex justify-between gap-x-6 py-5">
                        <div class="flex min-w-0 gap-x-4">
                            <div class="min-w-0 flex-auto">
                                <p class="text-base font-semibold ">Dries Vincent</p>
                                <p class="mt-1  text-sm ">dries.vincent@example.com</p>
                            </div>
                        </div>
                        <div class=" shrink-0 sm:flex sm:flex-col sm:items-end">
                            <div class="flex items-center gap-x-1.5">
                                <p class="text-xs/5 ">Updated 1h ago</p>
                            </div>
                        </div>
                    </li>
                    <li class="flex justify-between gap-x-6 py-5">
                        <div class="flex min-w-0 gap-x-4">
                            <div class="min-w-0 flex-auto">
                                <p class="text-base font-semibold ">Dries Vincent</p>
                                <p class="mt-1  text-sm ">dries.vincent@example.com</p>
                            </div>
                        </div>
                        <div class=" shrink-0 sm:flex sm:flex-col sm:items-end">
                            <div class="flex items-center gap-x-1.5">
                                <p class="text-xs/5 ">Updated 1h ago</p>
                            </div>
                        </div>
                    </li>
                    <li class="flex justify-between gap-x-6 pt-5">
                        <div class="flex min-w-0 gap-x-4">
                            <div class="min-w-0 flex-auto">
                                <p class="text-base font-semibold ">Lindsay Walton</p>
                                <p class="mt-1  text-sm ">lindsay.walton@example.com</p>
                            </div>
                        </div>
                        <div class=" shrink-0 sm:flex sm:flex-col sm:items-end">
                            <p class=" text-xs/5 ">Updated <time datetime="2023-01-23T13:23Z">10h
                                    ago</time></p>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        
        <!-- Main modal -->
        <div id="crud-modal" tabindex="-1" aria-hidden="true"
            class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full h-full md:inset-0  max-h-full bg-black bg-opacity-60 transform duration-500">
            <div class="relative p-4 w-full max-w-md max-h-full transform duration-500">
                
                <!-- Modal content -->
                <div class="relative bg-gray  rounded-lg shadow-sm dark:bg-gray-700 transform duration-500">
                    <!-- Modal header -->
                    <div
                        class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600 border-gray-200">
                        <h3 class="text-lg font-semibold ">
                            Add Activity
                        </h3>
                        <button type="button"
                            class="text-gray-400 bg-transparent hover:bg-gray-200 hover: rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600"
                            data-modal-toggle="crud-modal">
                            <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                                viewBox="0 0 14 14">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
                            </svg>
                            <span class="sr-only">Close modal</span>
                        </button>
                    </div>
                    <!-- Modal body -->
                    <form class="p-4 md:p-5">
                        <div class="grid gap-4 mb-4 grid-cols-2">
                            <div class="col-span-2">
                                <label for="name" class="block mb-2 text-sm font-medium  ">Activity Topic</label>
                                <input type="text" name="name" id="name"
                                    class="bg-gray-50 border   text-sm rounded-lg 0 block w-full p-2.5 focus:ring-0  focus:border-black"
                                    placeholder="for eg:- Evidence Collection" required="">
                            </div>

                            <div class="col-span-2">
                                <label for="description" class="block mb-2 text-sm font-medium  ">Activity
                                    Description</label>
                                <textarea id="description" rows="4"
                                    class="block p-2.5 w-full text-sm  bg-gray-50 rounded-lg border focus:border-black focus:ring-0 "
                                    placeholder="for eg:- cctv footage of location was collected and was inconclusive"></textarea>
                            </div>
                        </div>
                        <button type="submit"
                            class="w-full text-white  items-center bg-cool-gray focus:ring-0 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 text-center ">

                            Add new product
                        </button>
                    </form>
                </div>
            </div>
        </div>

    </div>

    <!-- component -->
    <div class=" group fixed flex bottom-0 right-0 mb-10 md:mr-10 items-center mr-5">
        <div
            class="  hidden group-hover:flex border border-gray h-10 rounded-lg px-2 items-center text-sm mr-3 bg-light-gray  font-medium  ">
            <p> chat with your investigator</p>
        </div>
        <button id="open-chat"
            class="bg-dark-blue p-1 text-white  rounded-full hover:bg-blue-600 transition duration-100 flex items-center ">
            <svg class="w-10 h-10 lg:w-11 lg:h-11 xl:w-12 xl:h-12" fill="currentColor" viewBox="0 0 20 20"
                xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd"
                    d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z"
                    clip-rule="evenodd"></path>
            </svg>
        </button>
    </div>
    <div id="chat-container" class="hidden fixed bottom-16 right-4 w-72 sm:w-80 md:w-96 rounded-lg">
        <div class="bg-white shadow-md rounded-lg max-w-md w-full">
            <div class="p-4 border-b bg-dark-blue text-white rounded-t-lg flex justify-between items-center">
                <p class="text-lg font-semibold">Investigator Name</p>
                <button id="close-chat"
                    class="text-gray-300 hover:text-gray-400 focus:outline-none focus:text-gray-400">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                        </path>
                    </svg>
                </button>
            </div>
            <div id="chatbox" class="p-4 h-80 bg-light-gray overflow-y-auto [&::-webkit-scrollbar]:hidden">
                <!-- Chat messages will be displayed here -->
                <div class="mb-2 text-right">
                    <p class="bg-dark-blue text-white rounded-lg py-2 px-4 inline-block">hello</p>
                </div>
                <div class="mb-2">
                    <p class="bg-cool-gray text-white rounded-lg py-2 px-4 inline-block">This is a response from the
                        chatbot.</p>
                </div>
                <div class="mb-2 text-right">
                    <p class="bg-dark-blue text-white rounded-lg py-2 px-4 inline-block">this example of chat</p>
                </div>
                <div class="mb-2">
                    <p class="bg-cool-gray text-white rounded-lg py-2 px-4 inline-block">This is a response from the
                        chatbot.</p>
                </div>
                <div class="mb-2 text-right">
                    <p class="bg-dark-blue text-white rounded-lg py-2 px-4 inline-block">design with tailwind</p>
                </div>
                <div class="mb-2">
                    <p class="bg-cool-gray text-white rounded-lg py-2 px-4 inline-block">This is a response from the
                        chatbot.</p>
                </div>
            </div>
            <div class="p-4 border-t bg-light-gray flex">
                <input id="user-input" type="text" placeholder="Type a message"
                    class="w-full px-3 py-2 border rounded-l-md focus:outline-none focus:ring-0 focus:border-black ">
                <button id="send-button"
                    class="bg-cool-gray text-white px-4 py-2 rounded-r-md hover:bg-blue-600 transition duration-300">Send</button>
            </div>
        </div>
    </div>
    <script>
        const chatbox = document.getElementById("chatbox");
        const chatContainer = document.getElementById("chat-container");

        const userInput = document.getElementById("user-input");
        const sendButton = document.getElementById("send-button");
        const openChatButton = document.getElementById("open-chat");
        const closeChatButton = document.getElementById("close-chat");

        let isChatboxOpen = true; // Set the initial state to open

        // Function to toggle the chatbox visibility
        function toggleChatbox() {
            chatContainer.classList.toggle("hidden");
            isChatboxOpen = !isChatboxOpen; // Toggle the state
            chatbox.scrollTop = chatbox.scrollHeight;
        }

        // Add an event listener to the open chat button
        openChatButton.addEventListener("click", toggleChatbox);

        // Add an event listener to the close chat button
        closeChatButton.addEventListener("click", toggleChatbox);

        // Add an event listener to the send button
        sendButton.addEventListener("click", function () {
            const userMessage = userInput.value;
            if (userMessage.trim() !== "") {
                addUserMessage(userMessage);
                respondToUser(userMessage);
                userInput.value = "";
            }
        });

        userInput.addEventListener("keyup", function (event) {
            if (event.key === "Enter") {
                const userMessage = userInput.value;
                addUserMessage(userMessage);
                respondToUser(userMessage);
                userInput.value = "";
            }
        });

        function addUserMessage(message) {
            const messageElement = document.createElement("div");
            messageElement.classList.add("mb-2", "text-right");
            messageElement.innerHTML = `<p class="bg-dark-blue text-white rounded-lg py-2 px-4 inline-block">${message}</p>`;
            chatbox.appendChild(messageElement);
            chatbox.scrollTop = chatbox.scrollHeight;
        }

        function addBotMessage(message) {
            const messageElement = document.createElement("div");
            messageElement.classList.add("mb-2");
            messageElement.innerHTML = `<p class="bg-cool-gray text-white rounded-lg py-2 px-4 inline-block">${message}</p>`;
            chatbox.appendChild(messageElement);
            chatbox.scrollTop = chatbox.scrollHeight;
        }

        function respondToUser(userMessage) {
            // Replace this with your chatbot logic
            setTimeout(() => {
                addBotMessage("This is a response from the chatbot.");
            }, 500);
        }


        //for modal

        

    </script>
    {%endblock%}

</body>

</html>